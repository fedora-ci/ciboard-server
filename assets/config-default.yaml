---
port: 5000
cookieKey: ~
authz:
  enabled: false
  use_saml: false
  saml:
    # https://github.com/bergie/passport-saml describes keys:
    # This is random string that server uses to encrypt cookies, and put on client in req.session, used by
    # Relative path for the callback is not sufficient information to generate a complete metadata for service provider
    # Metadata is generated by SP.
    callbackUrl: ~
    entryPoint: ~
    # service provider app name
    issuer: ~
    # sp human readable form:
    providerName: ~
    # the IDP's public signing certificate used to validate the signatures of the incoming SAML Responses
    # IDP signs its replies with this cert
    cert: ~
    # Next is required for AuthN:
    signatureAlgorithm: 'sha512'
    privateCert: ~
greenwave:
  url: ~
waiverdb:
  url: ~
datagrepper:
  url: ~
sst:
  url: 'https://sst.osci.redhat.com'
  results: 'results/sstlist.json'
db:
  # http://mongodb.github.io/node-mongodb-native/3.5/api/MongoClient.html
  url: ~
  limit_default: 20
  db_name: 'ci-messages'
  collections:
    metadata:
      name: 'metadata'
      indexes: []
    artifacts:
      name: 'artifacts'
    components:
      name: 'components_mapping'
  collection_name: 'artifacts'
  collection_name_components: 'components_mapping'
  options:
    tlsCAFile: ~
koji_fp:
  host: 'koji.fedoraproject.org'
  port: 443
  path: '/kojihub'
  headers:
    useragent: 'ciboard-server'
koji_cs:
  host: 'kojihub.stream.centos.org'
  port: 443
  path: '/kojihub'
  headers:
    useragent: 'ciboard-server'
koji_brew:
  host: ~
  port: 443
  path: '/brewhub'
  headers:
    useragent: 'ciboard-server'
mbs:
  fp:
    url: https://mbs.fedoraproject.org/module-build-service/2/
  cs:
    url: https://mbs.stream.rdu2.redhat.com/module-build-service/2/
  rh:
    url: ~
distgit:
  fp:
    base_url: 'https://src.fedoraproject.org'
    base_url_api: 'https://src.fedoraproject.org/api/0/'
  rh:
    base_url: ~
  cs:
    base_url: 'https://gitlab.com/redhat/centos-stream/'
    base_url_api: 'https://gitlab.com/api/v4/projects/'
krb:
  # keytab base64 encoded
  keytab: ~
  principal: ~
metadata:
  rw_groups:
    set:
      # http://localhost:5000/current_user
      - Employee
teiid:
  client_config:
    host: virtualdb.engineering.redhat.com
    port: '5432'
    user: osci
    password: ~
    database: public
    ssl: true

env_to_config_map:
  port: SRV_PORT
  cookieKey: SRV_COOKIE_KEY
  authz:
    enabled: SRV_AUTH_ENABLED
    use_saml: SRV_AUTH_USE_SAML
    saml:
      callbackUrl: SRV_SAML_CALLBACKURL
      entryPoint: SRV_SAML_ENTRYPOINT
      issuer: SRV_SAML_ISSUER
      providerName: SRV_SAML_PROVIDERNAME
      cert: SRV_SAML_CERT
      signatureAlgorithm: SRV_SAML_SIGNATUREALGORITHM
      privateKey: SRV_SAML_PRIVATEKEY
  greenwave:
    url: SRV_GREENWAVE_URL
  waiverdb:
    url: SRV_WAIVERDB_URL
  datagrepper:
    url: SRV_DATAGREPPER_URL
  sst:
    url: SRV_SST_URL
    results: SRV_SST_RESULTS
  db:
    url: SRV_DB_URL
    limit_default: SRV_DB_LIMIT_DEFAULT
    db_name: SRV_DB_DB_NAME
    collections:
      artifacts:
        name: SRV_DB_COLLECTION_NAME
      components:
        name: SRV_DB_COLLECTION_NAME_COMPONENTS
      metadata:
        name: SRV_DB_COLLECTION_NAME_METADATA
    options:
      tlsCAFile: SRV_DB_OPTIONS_TLSCAFILE
  koji_fp:
    host: SRV_KOJI_FP_HOST
    port: SRV_KOJI_FP_PORT
    path: SRV_KOJI_FP_PATH
    headers:
      useragent: SRV_KOJI_FP_HEADERS_USERAGENT
  koji_cs:
    host: SRV_KOJI_CS_HOST
    port: SRV_KOJI_CS_PORT
    path: SRV_KOJI_CS_PATH
    headers:
      useragent: SRV_KOJI_CS_HEADERS_USERAGENT
  koji_brew:
    host: SRV_KOJI_BREW_HOST
    port: SRV_KOJI_BREW_PORT
    path: SRV_KOJI_BREW_PATH
    headers:
      useragent: SRV_KOJI_BREW_HEADERS_USERAGENT
  mbs:
    cs:
      url: SRV_MBS_CS_URL
    fp:
      url: SRV_MBS_FP_URL
    rh:
      url: SRV_MBS_RH_URL
  distgit:
    rh:
      base_url: SRV_DISTGIT_RH_BASE_URL
    cs:
      base_url: SRV_DISTGIT_CS_BASE_URL
      base_url_api: SRV_DISTGIT_CS_BASE_API_URL
    fp:
      base_url: SRV_DISTGIT_FP_BASE_URL
      base_url_api: SRV_DISTGIT_FP_BASE_API_URL
  krb:
    keytab: SRV_KRB_KEYTAB
    principal: SRV_KRB_PRINCIPAL
  metadata:
    rw_groups:
      set:
        # use new line to separate
        - SRV_METADATA_RW_GROUPS
  teiid:
    client_config:
      host: SRV_TEIID_CLIENT_HOST
      port: SRV_TEIID_CLIENT_PORT
      user: SRV_TEIID_CLIENT_USER
      password: SRV_TEIID_CLIENT_PASSWORD
      database: SRV_TEIID_CLIENT_DB
      ssl: SRV_TEIID_CLIENT_SSL
